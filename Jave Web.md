# Java Web

## 网络编程入门

#### 软件结构

C/S 结构 全成为client/Server结构 ，是指客户端和服务器结构

B/S结构 全称为Browser/Server结构 浏览器和服务器结构

## 网络通信协议

连接和通信的规则称为网络通信协议，他对数据的传输格式，传输速率，传输步骤，等做了统一的规定

#### TCP/IP协议

传输控制协议/因特网互联协议，采用4层模型，每一层都呼叫他的下一层所提供的协议来完成自己的需求

应用层-->传输层-->网络层（核心，将数据分组）-->物理层（数据链路层）

### 协议分类

#### UDP

用户数据报协议，无连接的通信协议，消耗资源少，通信效率高

#### TCP

传输控制协议，面向连接的通信协议

### 三次握手

1. 第一次握手，客户端向服务器放出连接请求，等待服务器确认
2. 第二次握手，服务器向客户端回送一个响应，通知客户端接收到了连接请求
3. 第三次握手，客户端再次向服务器端发送确认信息，确认连接

### 网络编程三要素

#### 协议

#### IP地址

互联网协议地址，计算机设备的唯一编号

#### 端口号

由两个字节组成，取值范围在0-65535之间，其中1024之前不能使用，

mysql 3306 oracle 1521 tomcat 8080

## TCP通信程序

### 通信步骤

1. 服务器端启动
2. 客户端请求服务器端
3. 服务器端和客户端建立一个逻辑连接
4. 连接中包含一个IO对象（字节流对象）
5. 客户端给服务器端发送数据
6. 服务器端读取客户端发送的数据
7. 服务器端给客户端发送数据
8. 客户端读取服务器端发送的数据

- 多个客户端同时和服务器进行交互，服务器必须明确和哪个客户端进行交互
- 多个客户端同时和服务器进行交互，就需要使用多个IO流对象
  - 服务器端没有IO流，服务器可以获取到请求的客户端对象Socket，使用每个客户端Socket中提供的IO流和客户端进行交互
    - 服务器使用客户端的字节输入流读取客户端发送的数据
    - 服务器使用客户端的字节输出流给客户端回写数据
  - 简单记：服务器使用客户端的流和客户端进行交互

### Socket类

#### 上传文件

上传完文件要给一个结束标志。

void shutdownOutput

#### 改进

1. 文件名随机+毫秒值
2. 一直处于监听的状态（accept 死循环）
3. 多线程技术，有一个客户端上传文件，就开启一个线程

### 模拟B/S

